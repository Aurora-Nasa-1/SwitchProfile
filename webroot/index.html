<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6750A4">
    <title>SwitchProfile</title>
    
    <!-- Material Design 3 CSS -->
    <link rel="stylesheet" href="src/assets/css/md3.css">
    <link rel="stylesheet" href="src/assets/css/base.css">
    
    <!-- Preload fonts -->
    <link rel="preload" href="src/assets/fonts/google.woff2" as="font" type="font/woff2" crossorigin>
    

</head>
<body>
    <!-- Toast容器 -->
    <div id="toast-container"></div>
    
    <!-- 应用主容器 -->
    <div id="app">
        <!-- 顶栏 -->
        <header>
            <h1 id="page-title">情景模式</h1>
        </header>
        
        <!-- 首页 - 情景列表 -->
        <main id="home-page" class="page active">
            <div id="scenario-list" class="cards">
                <!-- 情景卡片将在这里动态生成 -->
            </div>
        </main>
        
        <!-- 管理页 - 情景管理 -->
        <main id="manage-page" class="page">
            <div id="manage-list">
                <!-- 管理列表将在这里动态生成 -->
            </div>
        </main>
        
        <!-- 浮动操作按钮 -->
        <button id="fab" class="fab" style="display: none;">
            <span class="material-symbols-rounded">add</span>
        </button>
        
        <!-- 底部导航栏 -->
        <nav class="app-nav">
            <div class="nav-content">
                <a href="#home" class="nav-item active" data-page="home">
                    <span class="material-symbols-rounded">home</span>
                    <span>首页</span>
                </a>
                <a href="#manage" class="nav-item" data-page="manage">
                    <span class="material-symbols-rounded">settings</span>
                    <span>管理</span>
                </a>
            </div>
        </nav>
    </div>
    
    <!-- 编辑对话框 -->
    <dialog id="edit-dialog">
        <h2 id="dialog-title">新建情景</h2>
        <form id="scenario-form">
            <label>
                <span>情景名称</span>
                <input type="text" id="scenario-name" name="scenario-name" required>
            </label>
            
            <div class="settings-section">
                <h4>设置</h4>
                <fieldset class="switches">
                    <label>
                        <span>兼容模式</span>
                        <input type="checkbox" id="compatibility-mode" name="compatibility-mode">
                    </label>
                    <label>
                        <span>自动重启</span>
                        <input type="checkbox" id="auto-reboot" name="auto-reboot">
                    </label>
                </fieldset>
            </div>
            
            <div class="settings-section">
                <h4>操作列表</h4>
                <div id="operations-list">
                    <!-- 操作项将在这里动态生成 -->
                </div>
                <fieldset>
                    <button type="button" id="add-operation" class="tonal">
                        <span class="material-symbols-rounded">add</span>
                        添加操作
                    </button>
                </fieldset>
            </div>
            
            <fieldset>
                <button type="button" id="cancel-edit">取消</button>
                <button type="submit" class="filled">保存</button>
            </fieldset>
        </form>
    </dialog>
    
    <!-- 操作类型选择对话框 -->
    <dialog id="operation-dialog">
        <h2>选择操作</h2>
        <div class="operation-types">
            <div class="operation-type-card" data-type="install_module">
                <h3>安装模块</h3>
            </div>
            <div class="operation-type-card" data-type="delete_module">
                <h3>删除模块</h3>
            </div>
            <div class="operation-type-card" data-type="flash_boot">
                <h3>刷入Boot</h3>
            </div>
            <div class="operation-type-card" data-type="custom_script">
                <h3>自定义脚本</h3>
            </div>
        </div>
        <fieldset>
            <button type="button" id="cancel-operation">取消</button>
        </fieldset>
    </dialog>
    
    <!-- 操作编辑对话框 -->
    <dialog id="operation-edit-dialog">
        <h2 id="operation-edit-title">编辑操作</h2>
        <form id="operation-form">
            <div id="operation-fields">
                <!-- 操作字段将根据类型动态生成 -->
            </div>
            <fieldset>
                <button type="button" id="cancel-operation-edit">取消</button>
                <button type="submit" class="filled">确定</button>
            </fieldset>
        </form>
    </dialog>
    
    <!-- 确认对话框 -->
    <dialog id="confirm-dialog">
        <h2 id="confirm-title">确认操作</h2>
        <div id="confirm-content">
            <!-- 确认内容将在这里动态生成 -->
        </div>
        <fieldset>
            <button type="button" id="confirm-cancel">取消</button>
            <button type="button" id="confirm-ok" class="filled">确定</button>
        </fieldset>
    </dialog>
    
    <!-- 文件选择器对话框 -->
    <dialog id="file-picker-dialog">
        <h2>选择文件</h2>
        <div id="file-picker-content">
            <div class="file-drop-zone">
                <span class="material-symbols-rounded">upload_file</span>
                <p>拖拽文件到此处或点击选择</p>
                <input type="file" id="fallback-file-input" style="display: none;">
                <button type="button" id="select-file-btn" class="tonal">选择文件</button>
            </div>
            <div id="selected-file-info" style="display: none;">
                <span class="material-symbols-rounded">description</span>
                <span id="selected-file-name"></span>
            </div>
        </div>
        <fieldset>
            <button type="button" id="file-picker-cancel">取消</button>
            <button type="button" id="file-picker-ok" class="filled" disabled>确定</button>
        </fieldset>
    </dialog>

    <!-- 文件浏览器对话框 -->
    <dialog id="file-browser-dialog">
        <div class="file-browser-header">
            <h2>选择文件</h2>
            <div class="file-browser-toolbar">
                <button type="button" id="file-browser-back" class="icon-button" disabled>
                    <span class="material-symbols-rounded">arrow_back</span>
                </button>
                <div class="file-browser-path" id="file-browser-path">/sdcard</div>
                <button type="button" id="file-browser-refresh" class="icon-button">
                    <span class="material-symbols-rounded">refresh</span>
                </button>
            </div>
        </div>
        <div class="file-browser-content" id="file-browser-content">
            <div class="file-browser-loading" id="file-browser-loading">
                <span class="material-symbols-rounded spinning">progress_activity</span>
                <p>加载中...</p>
            </div>
            <div class="file-browser-error" id="file-browser-error" style="display: none;">
                <span class="material-symbols-rounded">error</span>
                <p id="file-browser-error-message">加载失败</p>
            </div>
            <div class="file-list" id="file-browser-list" style="display: none;">
                <!-- 文件列表将在这里动态生成 -->
            </div>
            <div class="file-browser-empty" id="file-browser-empty" style="display: none;">
                <span class="material-symbols-rounded">folder_open</span>
                <p>此目录为空</p>
            </div>
        </div>
        <fieldset>
            <button type="button" id="file-browser-cancel">取消</button>
            <button type="button" id="file-browser-select" class="filled" disabled>选择</button>
        </fieldset>
    </dialog>
    
    <!-- 应用脚本 -->
    <script type="module" src="src/app.js"></script>
</body>
</html>